<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Compile an HTTP response. — response • webqueue</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Noto_Sans-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Compile an HTTP response. — response"><meta name="description" content="If your webqueue's handler function returns a list, json object, character
vector, or scalar integer, response() will be used to transform that
result into an HTTP response.
You may also call response() within your handler to better customize the
HTTP response. Or, return a result of class 'AsIs' to have that object
passed directly on to 'httpuv'."><meta property="og:description" content="If your webqueue's handler function returns a list, json object, character
vector, or scalar integer, response() will be used to transform that
result into an HTTP response.
You may also call response() within your handler to better customize the
HTTP response. Or, return a result of class 'AsIs' to have that object
passed directly on to 'httpuv'."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">webqueue</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/handler.html">Handler</a></li>
    <li><a class="dropdown-item" href="../articles/interrupts.html">Interrupts</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/cmmr/webqueue/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Compile an HTTP response.</h1>
      <small class="dont-index">Source: <a href="https://github.com/cmmr/webqueue/blob/main/R/response.r" class="external-link"><code>R/response.r</code></a></small>
      <div class="d-none name"><code>response.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>If your webqueue's <code>handler</code> function returns a list, json object, character
vector, or scalar integer, <code>response()</code> will be used to transform that
result into an HTTP response.<br><br>
You may also call <code>response()</code> within your handler to better customize the
HTTP response. Or, return a result of class 'AsIs' to have that object
passed directly on to 'httpuv'.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">response</span><span class="op">(</span>body <span class="op">=</span> <span class="cn">NULL</span>, status <span class="op">=</span> <span class="fl">200L</span>, headers <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-body">body<a class="anchor" aria-label="anchor" href="#arg-body"></a></dt>
<dd><p>The content. A list will be encoded as JSON. A scalar
integer will be interpreted as a status. A character vector
will be concatenated with no separator.</p></dd>


<dt id="arg-status">status<a class="anchor" aria-label="anchor" href="#arg-status"></a></dt>
<dd><p>A HTTP response status code.</p></dd>


<dt id="arg-headers">headers<a class="anchor" aria-label="anchor" href="#arg-headers"></a></dt>
<dd><p>A named character vector of HTTP headers. A list-like
object is acceptable if all elements are simple strings.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Objects created by <code><a href="header.html">header()</a></code> and/or <code><a href="cookie.html">cookie()</a></code>. Or
key-value pairs to add to <code>headers</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>&lt;response/AsIs&gt;</code> object. Essentially a list with elements named
<code>body</code>, <code>status</code>, and <code>headers</code> formatted as 'httpuv' expects.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span>    <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://cmmr.github.io/webqueue/">webqueue</a></span><span class="op">)</span></span></span>
<span class="r-in"><span>    </span></span>
<span class="r-in"><span>    <span class="fu">response</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name <span class="op">=</span> <span class="fu"><a href="https://jeroen.r-universe.dev/jsonlite/reference/unbox.html" class="external-link">unbox</a></span><span class="op">(</span><span class="st">'Peter'</span><span class="op">)</span>, pi <span class="op">=</span> <span class="va">pi</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">HTTP/1.1 200 OK</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Content-Type: application/json; charset=utf-8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> {"name":"Peter","pi":[3.1416]}</span>
<span class="r-in"><span>         </span></span>
<span class="r-in"><span>    <span class="fu">response</span><span class="op">(</span><span class="fl">307L</span>, Location <span class="op">=</span> <span class="st">'/new/file.html'</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">HTTP/1.1 307 Temporary Redirect</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Location: /new/file.html</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Temporary Redirect</span>
<span class="r-in"><span>    </span></span>
<span class="r-in"><span>    <span class="co"># The `body` and `status` slots also handle header objects.</span></span></span>
<span class="r-in"><span>    <span class="fu">response</span><span class="op">(</span><span class="fu"><a href="cookie.html">cookie</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">123</span>, http_only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">HTTP/1.1 200 OK</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Set-Cookie: id=123; HttpOnly</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> OK</span>
<span class="r-in"><span>    </span></span>
<span class="r-in"><span>    <span class="co"># Allow javascript to access custom headers.</span></span></span>
<span class="r-in"><span>    <span class="va">uid</span> <span class="op">&lt;-</span> <span class="fu"><a href="header.html">header</a></span><span class="op">(</span><span class="st">'x-user-id'</span>    <span class="op">=</span> <span class="fl">100</span>, expose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="va">sid</span> <span class="op">&lt;-</span> <span class="fu"><a href="header.html">header</a></span><span class="op">(</span><span class="st">'x-session-id'</span> <span class="op">=</span> <span class="fl">303</span>, expose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu">response</span><span class="op">(</span><span class="va">uid</span>, <span class="va">sid</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">HTTP/1.1 200 OK</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x-user-id: 100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x-session-id: 303</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Access-Control-Expose-Headers: x-user-id, x-session-id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> OK</span>
<span class="r-in"><span>    </span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Daniel P. Smith, Alkek Center for Metagenomics and Microbiome Research.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

